(this["webpackJsonpmy-app-wp-test"]=this["webpackJsonpmy-app-wp-test"]||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var r,n=a(0),l=a.n(n),i=a(85),c=a.n(i),o=a(3),s=a(16),d=function(e,t){switch(t.type){case"SET_TOKEN":return Object(s.a)({},e,{securityToken:t.payload});case"UPDATE_TOTE_BOXES":return Object(s.a)({},e,{toteBoxesContent:t.payload});case"SET_DROP_OFF":return Object(s.a)({},e,{dropOffObj:t.payload});case"SET_PICK_UP":return Object(s.a)({},e,{pickUpObj:t.payload});default:return e}},m={securityToken:null,toteBoxesContent:null,dropOffObj:{dayID:20200313,routeID:47,startTime:960},pickUpObj:{dayID:20200319,routeID:47,startTime:480}},p=l.a.createContext(m),u=function(e){var t=l.a.useReducer(d,m),a=Object(o.a)(t,2),r={state:a[0],dispatch:a[1]};return l.a.createElement(p.Provider,{value:r},e.children)},f=(a(95),a(4)),v=a.n(f),E=a(11),b=a(86),D=a.n(b),h=function(e){var t=e.step,a=Object(n.useState)("stepWrap step"+t),r=Object(o.a)(a,2),i=r[0],c=r[1];return Object(n.useEffect)((function(){c("stepWrap step"+t)}),[t]),l.a.createElement("div",null,l.a.createElement("div",{className:"headerComponent"},l.a.createElement("a",{href:"/"},l.a.createElement("img",{src:D.a,alt:"King Tote"})),l.a.createElement("div",{className:i},l.a.createElement("div",{className:"eachStep first"}),l.a.createElement("div",{className:"eachStep"}),l.a.createElement("div",{className:"eachStep"}),l.a.createElement("div",{className:"eachStep"}),l.a.createElement("div",{className:"eachStep"}))))},g=a(2),k=a(8),F=a(6),N=a.n(F),y=null,O=function(e){var t=e.formData,a=e.setFormData,r=e.nextStep,i=e.franchises,c=e.zipCodes,o=(e.serviceTypes,e.setServiceTypes),s=e.setResetCalendars,d=0,m=Object(n.useContext)(p),u=m.state,f=m.dispatch,b=k.b({locationType:k.c().required("Pick up is required"),serviceArea:k.c().required("Service area is required"),pickUp:k.a().positive().integer().required("zip code is required")}),D=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,r,n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}a="Service area is required",e.next=14;break;case 4:if(t===d){e.next=14;break}return d=t,r="https://kingtote.vonigo.com/api/v1/resources/zips/?securityToken="+u.securityToken+"&pageNo=1&pageSize=50",n="https://kingtote.vonigo.com/api/v1/security/session/?securityToken="+u.securityToken+"&method=2&franchiseID="+d,e.next=10,N.a.post(n);case 10:return e.next=12,N.a.post(r);case 12:l=e.sent,c=l.data.Zips;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t;return 5===(e+"").length?0===function(e){var t=e+"";return c.filter((function(e){return e.zip===t&&e.franchiseID==d}))}(e).length&&(t="this code is out of the service area"):t="invalid zip code",t};return l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{title:"Enter Personal Details",step:"One"}),l.a.createElement("div",{className:"introWrap"},l.a.createElement("h2",null,"Welcome"),l.a.createElement("p",null,"Get started by selecting a service area and entering your zip codes to verify we service your area")),l.a.createElement(g.c,{initialValues:t,onSubmit:function(e){!function(e,a,r){if(y!==r+""+e+a){f({type:"UPDATE_TOTE_BOXES",payload:null}),null!==t.dateDropOff&&s(!0);var n="https://kingtote.vonigo.com/api/v1/data/priceLists/?securityToken="+u.securityToken+"&method=2&zipCode="+e+"&serviceTypeID="+r+"&pageNo=1&pageSize=500";N.a.get(n).then((function(t){null!==t.data&&(o(t.data.PriceItems),y=r+""+e+a)})).catch((function(e){console.log("Error >> ",e)}))}}(e.dropOff,e.pickUp,e.locationType),a(e),r()},validationSchema:b},(function(e){var t=e.errors,a=e.touched;return l.a.createElement(g.b,null,l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"nameImput"},"Service Area"),l.a.createElement(g.a,{as:"select",name:"serviceArea",validate:D},l.a.createElement("option",{value:""},"select a service area"),i?i.map((function(e){return l.a.createElement("option",{key:e.franchiseID,value:e.franchiseID},e.franchiseName)})):""),t.serviceArea&&a.serviceArea&&l.a.createElement("div",{className:"errorMessage"},t.serviceArea)),l.a.createElement("div",{className:"formControl"}),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"dropOff"},"Drop-off Zip Code"),l.a.createElement(g.a,{name:"dropOff",placeholder:"zip code",type:"number",validate:F}),t.dropOff&&a.dropOff&&l.a.createElement("div",{className:"errorMessage"},t.dropOff)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"pickUp"},"Pick-up Zip Code"),l.a.createElement(g.a,{name:"pickUp",placeholder:"zip code",type:"number",validate:F}),t.pickUp&&a.pickUp&&l.a.createElement("div",{className:"errorMessage"},t.pickUp)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"locationResidential"},"Location type"),l.a.createElement("div",{className:"ratioWrap"},l.a.createElement(g.a,{id:"locationResidential",name:"locationType",type:"radio",value:"16"}),l.a.createElement("label",{htmlFor:"locationResidential"},"Residential")),l.a.createElement("div",{className:"ratioWrap"},l.a.createElement(g.a,{id:"locationCommertial",name:"locationType",type:"radio",value:"15"}),l.a.createElement("label",{htmlFor:"locationCommertial"},"Commertial")),t.locationType&&a.locationType&&l.a.createElement("div",{className:"errorMessage"},t.locationType)),l.a.createElement("div",{className:"formControl submitControl"},l.a.createElement("button",{className:"button global",name:"submit",type:"submit"},l.a.createElement("span",null,"Next"))))})))},C=function(e){var t=e.listClasses,a=e.trackKey,r=e.dataBox,n=e.changeSelectedBox;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:t,onClick:function(){n(a)}},l.a.createElement("p",null,r.week," ",r.week>1?"Weeks":"Week"," rental"),l.a.createElement("span",{className:"price"},"$",r.price%1!==0?r.price+"0":r.price)))},I=function(e){var t=e.trackKey,a=e.dataObj,r=e.updateSelectedBox,i=Object(n.useState)(a.indexActive),c=Object(o.a)(i,2),s=c[0],d=c[1];if("Additional Tote"===a.title)return null;var m=function(e){s===e?(d(null),r({parent:t,child:null})):(d(e),r({parent:t,child:e}))},p=a.prices.map((function(e,t){return l.a.createElement(C,{listClasses:s===t?"eachToteItem toteActive":"eachToteItem",key:t,trackKey:t,dataBox:e,changeSelectedBox:m})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl fullLenght"},l.a.createElement("label",{className:"boldLabel"},a.title),l.a.createElement("p",null,a.sub),l.a.createElement("div",{className:"toteBoxes"},p),a.additionalWeek&&l.a.createElement("p",{className:"bottomCentered"},a.additionalWeek)))},S=[],T=[],j=function(e){var t,a=e.formData,r=e.setFormData,i=e.nextStep,c=e.prevStep,d=e.serviceTypes,m=e.resetCalendars,u=e.setResetCalendars,f=Object(n.useContext)(p),v=f.state,E=f.dispatch,b=Object(n.useState)("back"),D=Object(o.a)(b,2),k=D[0],F=D[1],N=Object(n.useState)(!0),y=Object(o.a)(N,2),O=y[0],C=y[1];t=O?"disabled":"",m&&(r(Object(s.a)({},a,{dateDropOff:null,datePickUp:null,schedulingSummary:null,timeRangeDropStart:null,timeRangeDropEnd:null,timeRangePickStart:null,timeRangePickEnd:null})),u(!1));var j=function(){if(null!==v.toteBoxesContent){var e=[];v.toteBoxesContent.forEach((function(t){null!==t.indexActive&&e.push(t)})),e.length?C(!1):C(!0)}},x=function(e){S[e.parent].indexActive=e.child,j()};return Object(n.useEffect)((function(){if(d){T=[];var e=d.filter((function(e){return 1===e.priceBlockSequence&&!0===e.isActive&&!0===e.isOnline}));T.push(e);var t=d.filter((function(e){return 2===e.priceBlockSequence&&!0===e.isActive&&!0===e.isOnline}));T.push(t);var a=d.filter((function(e){return 3===e.priceBlockSequence&&!0===e.isActive&&!0===e.isOnline}));T.push(a);var r=d.filter((function(e){return 4===e.priceBlockSequence&&!0===e.isActive&&!0===e.isOnline}));T.push(r),function(e){if(null===v.toteBoxesContent){var t=[];e.forEach((function(e){e.forEach((function(e){var a={price:e.value,week:e.priceBlockSequence,legend:e.priceBlock};(function(e,t,a){var r=e.findIndex((function(e){return e.title===t}));-1!==r&&e[r].prices.push(a);return-1===r})(t,e.priceItemView,a)&&t.push({title:e.priceItemView,indexActive:null,sub:e.descriptionHelp,additionalWeek:"$35 each additional week",prices:[a]})}))})),S=t,E({type:"UPDATE_TOTE_BOXES",payload:t})}}(T)}j()}),[d]),l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{title:"Enter Personal Details",step:"Two"}),l.a.createElement("div",{className:"introWrap"},l.a.createElement("h2",null,"Order details"),l.a.createElement("p",null,"Please select the applicable option(s) below.")),l.a.createElement(g.c,{initialValues:a,onSubmit:function(e){!function(e){r(Object(s.a)({},a,{zipCodeDropOff:a.dropOff,zipCodePickUp:a.pickUp,promoCodeField:e.promoCodeField})),E({type:"UPDATE_TOTE_BOXES",payload:S})}(e),"back"===k?c():i()}},(function(){return l.a.createElement(g.b,null,null!==v.toteBoxesContent?v.toteBoxesContent.map((function(e,t){return l.a.createElement(I,{key:t,trackKey:t,dataObj:e,updateSelectedBox:x})})):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl fullLenght"},l.a.createElement("label",{className:"boldLabel"},"Loading..."),l.a.createElement("p",null,"Loading..."),l.a.createElement("div",{className:"toteBoxes loadingToteBoxes"},l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price"))),l.a.createElement("p",{className:"bottomCentered"},"Loading..")),l.a.createElement("div",{className:"formControl fullLenght"},l.a.createElement("label",{className:"boldLabel"},"Loading..."),l.a.createElement("p",null,"Loading..."),l.a.createElement("div",{className:"toteBoxes loadingToteBoxes"},l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price")),l.a.createElement("div",{className:"eachToteItem"},l.a.createElement("p",null,"Week rental"),l.a.createElement("span",{className:"price"},"$ price"))),l.a.createElement("p",{className:"bottomCentered"},"Loading.."))),l.a.createElement("div",{className:"formControl"}),l.a.createElement("div",{className:"formControl submitControl fullLenght"},l.a.createElement("button",{className:"whiteBtn",type:"submit",onClick:function(){return F("back")}},l.a.createElement("span",null,"Previous")),l.a.createElement("button",{type:"submit",className:t,onClick:function(){return F("next")}},l.a.createElement("span",null,"Next"))))})))},x=(a(116),a(52)),P=a(72),A=a.n(P),U=function(e){var t=e.listClasses,a=e.trackKey,r=e.startAt,n=e.endAt,i=e.changeSelectedTime,c=e.closeCalendar;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:t},l.a.createElement("div",{className:"timeAvailable",onClick:function(){i(a)}},l.a.createElement("p",null,r," - ",n)),l.a.createElement("div",{className:"timeSelected"},l.a.createElement("div",{className:"timeDetail"},l.a.createElement("p",null,r," - ",n)),l.a.createElement("button",{className:"button global",onClick:function(e){e.preventDefault(),c()}},l.a.createElement("span",null,"Confirm")))))},w=new Date,M="",L=(new Date).getFullYear(),q=((new Date).getMonth(),""),z={weekday:"long",year:"numeric",month:"long",day:"numeric"},B={year:"numeric",month:"2-digit",day:"2-digit"},W=function(e){var t=e.formData,a=e.controlType,r=e.updateStateSchedulingStart,i=e.updateStateSchedulingTime,c=e.currentDate,s=(e.startingTime,e.endingTime),d=e.enabled,m=e.setServiceWeeks,u=e.arrayDisabled,f=Object(n.useContext)(p),v=f.state,E=f.dispatch,b=Object(n.useState)(null),D=Object(o.a)(b,2),h=D[0],g=D[1],k=Object(n.useState)(s),F=Object(o.a)(k,2),y=F[0],O=F[1],C=Object(n.useState)(""),I=Object(o.a)(C,2),S=I[0],T=I[1],j=Object(n.useState)(!1),P=Object(o.a)(j,2),W=P[0],V=P[1],R=Object(n.useState)(!1),J=Object(o.a)(R,2),$=J[0],_=J[1],Z=Object(n.useState)(null),K=Object(o.a)(Z,2),H=K[0],Y=K[1],X=Object(n.useState)([]),G=Object(o.a)(X,2),Q=G[0],ee=G[1],te=function(e,a){var r,n=[],l=(new Date(e).getTime()/1e3).toFixed(0);l=parseInt(l);var i=10;i=7*i*24*60*60;var c=parseInt(l)+parseInt(i);q=(q=(q=e.toLocaleDateString(void 0,B)).split("/"))[2]+q[0]+q[1];var o=parseInt(q);L=e.getFullYear(),e.getMonth(),r="https://kingtote.vonigo.com/api/v1/resources/availability/?securityToken="+v.securityToken+"&method=0&pageNo=1&pageSize=100&duration=60&dateStart="+l+"&dateEnd="+c+"&zip="+a+"&serviceTypeID="+t.locationType,N.a.get(r).then((function(e){if(null!==e.data.Availability&&void 0!==e.data.Availability){for(var t=function(e){var t=""+e,a=t.substr(0,4),r=parseInt(t.substr(4,2))-1,n=t.substr(6,2);return new Date(a,r,n)},a=function(a){var r=function(e){var t=e,a=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),n=t.getDate().toString();return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),a+r+n}(a);0===e.data.Availability.filter((function(e){return e.dayID===""+r})).length&&n.push(t(r))},r=t(o);r<new Date(1e3*c);r.setDate(r.getDate()+1))a(r);ee(n)}})).catch((function(e){console.log("Error availability >>> ",e)}))},ae=function(e,t){return t?new Date(e.setDate(e.getDate()+7*t)):new Date(e.setDate(e.getDate()+1))},re=function(){var e=0,t=[],a=v.toteBoxesContent;return a?(a.forEach((function(e){null!==e.indexActive&&t.push(e.indexActive)})),t.forEach((function(t){null!==t&&t>e&&(e=t)})),e+1):e},ne="bookingComponent";$&&(ne="bookingComponent openDetailedBooking");var le="calendarAndTimeWrap";W&&(le="calendarAndTimeWrap timeOn");var ie="calendarLayer";d?(w="end"===a?ae(new Date(t.dateDropOff)):new Date,M=ae(new Date(t.dateDropOff),re()),m(re())):ie="calendarLayer disabled";var ce=function(e){if(null!==e)return(e=(e=1===(e=e.split(":"))[0].length?"0"+e[0]+":"+e[1]:e[0]+":"+e[1]).toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"am":"pm",e[0]=+e[0]%12||12),e.join("")},oe=function(e,t){var a=e/60,r=Math.floor(a),n=60*(a-r),l=Math.round(n);return l=30===l?l:"00",t?r+2+":"+l:r+":"+l},se=function(e){var r="",n=[],l=[],i=(new Date(e).getTime()/1e3).toFixed(0);i=parseInt(i);var c=re();c=7*c*24*60*60;var o=parseInt(i)+parseInt(c);q=(q=(q=e.toLocaleDateString(void 0,B)).split("/"))[2]+q[0]+q[1];var s=parseInt(q);Y(null),L=e.getFullYear(),e.getMonth(),"start"===a?(r="https://kingtote.vonigo.com/api/v1/resources/availability/?securityToken="+v.securityToken+"&method=0&pageNo=1&pageSize=100&duration=60&dateStart="+i+"&dateEnd="+o+"&zip="+t.dropOff+"&serviceTypeID="+t.locationType,N.a.get(r).then((function(a){if(null!==a.data.Availability&&void 0!==a.data.Availability){for(var r=function(e){var t=""+e,a=t.substr(0,4),r=parseInt(t.substr(4,2))-1,n=t.substr(6,2);return new Date(a,r,n)},i=function(e){var t=function(e){var t=e,a=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),n=t.getDate().toString();return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),a+r+n}(e);0===(n=a.data.Availability.filter((function(e){return e.dayID===""+t}))).length&&l.push(r(t))},c=r(s);c<new Date(1e3*o);c.setDate(c.getDate()+1))i(c);te(e,t.pickUp),n=a.data.Availability.filter((function(e){return e.dayID===q})),Y(n)}})).catch((function(e){console.log("Error availability >>> ",e)}))):(o=i+86400,r="https://kingtote.vonigo.com/api/v1/resources/availability/?securityToken="+v.securityToken+"&method=0&pageNo=1&pageSize=100&duration=60&dateStart="+i+"&dateEnd="+o+"&zip="+t.pickUp+"&serviceTypeID="+t.locationType,N.a.get(r).then((function(e){null!==e.data.Availability&&void 0!==e.data.Availability&&(n=e.data.Availability.filter((function(e){return e.dayID===q})),Y(n))})).catch((function(e){console.log("Error availability >>> ",e)}))),V(!0),T(e.toLocaleDateString(void 0,z))},de=function(){V(!1),_(!0),r({kind:a,stringDate:S,arr:Q})},me=function(e){g(e),O(H[e].startTime),i({kind:a,stringTimeStart:H[e].startTime,stringTimeEnd:H[e].startTime}),E("start"===a?{type:"SET_DROP_OFF",payload:H[e]}:{type:"SET_PICK_UP",payload:H[e]})};return Object(n.useEffect)((function(){null!==c?(V(!1),_(!0),T(c)):"end"===a&&(_(!1),g(null))}),[c]),Object(n.useEffect)((function(){te(new Date,t.dropOff)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:ne},l.a.createElement("div",{className:"dateAndTimeSelected"},l.a.createElement("p",{className:"dateSelected"},S,l.a.createElement("br",null),"between ",ce(oe(y))," - ",ce(oe(y,"endTime"))),l.a.createElement("span",{className:"iconEditTime",onClick:function(){return _(!1),void("start"===a&&(r({kind:"end",stringDate:null}),g(null)))}})),l.a.createElement("div",{className:le},l.a.createElement("div",{className:ie},"start"===a?l.a.createElement(A.a,{onDayClick:se,disabledDays:[].concat(Object(x.a)(Q),[{before:w}])}):l.a.createElement(A.a,{className:"endCalendar",onDayClick:se,month:new Date(L,new Date(M).getMonth()),selectedDays:new Date(M),disabledDays:[].concat(Object(x.a)(u),[{before:w}])}),l.a.createElement("div",{className:"hideCalendar"})),l.a.createElement("div",{className:"timeLayer"},l.a.createElement("br",null),l.a.createElement("p",{className:"dateSelected",onClick:function(){return V(!1)}},l.a.createElement("span",null,"<"),"  ",S),l.a.createElement("div",{className:"timeOptionsWrap"},null!==H&&H.length>0?H.map((function(e,t){return l.a.createElement(U,{listClasses:h===t?"timeOption openSelectedDetail":"timeOption",key:t,trackKey:t,startAt:ce(oe(e.startTime)),endAt:ce(oe(e.startTime,"endTime")),changeSelectedTime:me,closeCalendar:de})})):null!==H&&0===H.length?l.a.createElement("div",{className:"calendarAndTimeWrap"},l.a.createElement("div",{className:"timeAvailable"},l.a.createElement("p",null,"No schedules available."))):l.a.createElement("div",{className:"calendarAndTimeWrap"},l.a.createElement("div",{className:"timeAvailable"},l.a.createElement("p",null,"Loading..."))))))))},V=function(e){var t=e.formData,a=e.setFormData,r=e.origin,i=e.parentFunction,c=Object(n.useState)(null===t.schedulingSummary?0:t.schedulingSummary),d=Object(o.a)(c,2),m=d[0],p=d[1],u=Object(n.useState)(0),f=Object(o.a)(u,2),v=f[0],E=f[1],b=function(e){var a=new Date(t.dateDropOff),r=new Date(e);return a=Math.round((r-a)/864e5)},D=Object(n.useState)(null!==t.dateDropOff),h=Object(o.a)(D,2),g=h[0],k=h[1],F=Object(n.useState)([]),N=Object(o.a)(F,2),y=N[0],O=N[1],C=function(e){"start"===e.kind?(k(!0),a(Object(s.a)({},t,{dateDropOff:e.stringDate})),b(0),O(e.arr)):(null===e.stringDate?k(!1):p(b(e.stringDate)),a(Object(s.a)({},t,{datePickUp:e.stringDate,schedulingSummary:b(e.stringDate)}))),"Scheduling"===r&&i(e)},I=function(e){"start"===e.kind?a(Object(s.a)({},t,{timeRangeDropStart:e.stringTimeStart,timeRangeDropEnd:e.stringTimeEnd})):a(Object(s.a)({},t,{timeRangePickStart:e.stringTimeStart,timeRangePickEnd:e.stringTimeEnd}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{className:"boldLabelCalendar"},"Select Drop-off Date/Time"),l.a.createElement(W,{formData:t,updateStateSchedulingStart:C,updateStateSchedulingTime:I,controlType:"start",currentDate:t.dateDropOff,startingTime:t.timeRangeDropStart,endingTime:t.timeRangeDropEnd,enabled:!0,setServiceWeeks:E,arrayDisabled:y})),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{className:"boldLabelCalendar"},"Select Pick-up Date/Time"),l.a.createElement(W,{formData:t,updateStateSchedulingStart:C,updateStateSchedulingTime:I,controlType:"end",currentDate:t.datePickUp,startingTime:t.timeRangePickStart,endingTime:t.timeRangePickEnd,enabled:g,setServiceWeeks:E,arrayDisabled:y})),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{className:"boldLabelCalendar"},"Scheduling Summary"),l.a.createElement("p",null,m>0?m:0," days total"),m>0&&m/v>7?l.a.createElement("p",null,l.a.createElement("strong",null,"You have selected more days than your original package and are subject to additional charges")):""))},R=function(e){var t=e.formData,a=e.setFormData,r=e.nextStep,i=e.prevStep,c=Object(n.useState)("back"),s=Object(o.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)(!0),u=Object(o.a)(p,2),f=u[0],v=u[1],E=f?"disabled":"";null!==t.dateDropOff&&null!==t.datePickUp&&(E="");var b=function(e){"end"===e.kind&&(null===e.stringDate?v(!0):v(!1))};return Object(n.useEffect)((function(){window.scrollTo({behavior:"smooth",top:0})}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{title:"Enter Personal Details",step:"Three"}),l.a.createElement("div",{className:"introWrap"},l.a.createElement("h2",null,"Scheduling"),l.a.createElement("p",null,"Please select a date and time to drop-off and pick-up totes")),l.a.createElement(g.c,{initialValues:t,onSubmit:function(e){"back"===d?i():r()}},(function(){return l.a.createElement(g.b,null,l.a.createElement(V,{formData:t,setFormData:a,origin:"Scheduling",parentFunction:b}),l.a.createElement("div",{className:"formControl submitControl fullLenght"},l.a.createElement("button",{className:"whiteBtn",type:"submit",onClick:function(){return i()}},l.a.createElement("span",null,"Previous")),l.a.createElement("button",{className:E,type:"submit",onClick:function(){return m("next")}},l.a.createElement("span",null,"Next"))))})))},J=k.b({firstNameField:k.c().required("First name is required"),lastNameField:k.c().required("Last name is required"),telField:k.c().required("Telephone is required"),emailField:k.c().required("Email is required"),addressDropOffField:k.c().required("Address is required"),cityDropOffField:k.c().required("City is required"),stateDropOffField:k.c().required("State is required"),addressPickUpField:k.c().required("Address is required"),cityPickUpField:k.c().required("City is required"),statePickUpField:k.c().required("State is required")}),$=function(e){var t;return e||(t="Street is required"),t},_=function(e){var t;return e||(t="City is required"),t},Z=function(e){var t,a=e+"";return e?a.length>5?t="postal code is 5 digits":a.length<5&&(t="postal code is 5 digits"):t="Drop off required",t},K=function(e){var t;return e||(t="State is required"),t},H=function(e){var t;return e||(t="First name is required"),t},Y=function(e){var t;return e||(t="Last name is required"),t},X=function(e){var t;return e||(t="Telephone is required"),t},G=function(e){var t;return e||(t="Email name is required"),t},Q=function(e){var t=e.formData,a=e.setFormData,r=e.nextStep,i=e.prevStep,c=Object(n.useState)("back"),s=Object(o.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)(t.sameAddressAsDropOff),u=Object(o.a)(p,2),f=u[0],v=u[1],E=Object(n.useState)(t.sameAsMainContactDropOff),b=Object(o.a)(E,2),D=b[0],k=b[1],F=Object(n.useState)(t.sameAsMainContactPickUp),N=Object(o.a)(F,2),y=N[0],O=N[1];return Object(n.useEffect)((function(){window.scrollTo({behavior:"smooth",top:0})}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{title:"Enter Personal Details",step:"Four"}),l.a.createElement("div",{className:"introWrap"},l.a.createElement("h2",null,"Your Details"),l.a.createElement("p",null,"Please fill out your contact information and Delivery and Pick-Up addresses")),l.a.createElement(g.c,{initialValues:t,onSubmit:function(e){a(e),"back"===d?i():r()},validationSchema:J},(function(e){var t=e.errors,a=e.touched;return l.a.createElement(g.b,{className:"fifthForm"},l.a.createElement("div",{className:"inlineFifth"},l.a.createElement("div",{className:"leftFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Main Contact Information"),l.a.createElement("label",{htmlFor:"firstNameInput"},"First Name"),l.a.createElement(g.a,{id:"firstNameInput",name:"firstNameField",placeholder:"Jane"}),t.firstNameField&&a.firstNameField&&l.a.createElement("div",{className:"errorMessage"},t.firstNameField)),l.a.createElement("div",{className:"formControl"}),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"lastNameInput"},"Last Name"),l.a.createElement(g.a,{id:"lastNameInput",name:"lastNameField",placeholder:"Doe"}),t.lastNameField&&a.lastNameField&&l.a.createElement("div",{className:"errorMessage"},t.lastNameField)),l.a.createElement("div",{className:"formControl"}),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"telInput"},"Phone"),l.a.createElement(g.a,{id:"telInput",name:"telField",placeholder:"(555) 555 555",type:"tel"}),t.telField&&a.telField&&l.a.createElement("div",{className:"errorMessage"},t.telField)),l.a.createElement("div",{className:"formControl"}),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"emailInput"},"Email"),l.a.createElement(g.a,{id:"emailInput",name:"emailField",placeholder:"hello@hello.com",type:"email"}),t.emailField&&a.emailField&&l.a.createElement("div",{className:"errorMessage"},t.emailField)),l.a.createElement("div",{className:"formControl"})),l.a.createElement("div",{className:"rightFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Billing Address"),l.a.createElement("div",{className:"ratioWrap checkboxInline"},l.a.createElement(g.a,{id:"sameAddressAsDropOff",name:"sameAddressAsDropOff",type:"checkbox",onClick:function(){v(!f)}}),l.a.createElement("label",{htmlFor:"sameAddressAsDropOff"},"Same as Drop-off Address"))),f?"":l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"billingAddressField"},"Street Address"),l.a.createElement(g.a,{id:"billingAddressField",name:"billingAddressField",placeholder:"Street Address",validate:$}),t.billingAddressField&&a.billingAddressField&&l.a.createElement("div",{className:"errorMessage"},t.billingAddressField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"billingCityField"},"City"),l.a.createElement(g.a,{id:"billingCityField",name:"billingCityField",placeholder:"city",validate:_}),t.billingCityField&&a.billingCityField&&l.a.createElement("div",{className:"errorMessage"},t.billingCityField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"billingStateField"},"State"),l.a.createElement(g.a,{id:"billingStateField",name:"billingStateField",placeholder:"state",validate:K}),t.billingStateField&&a.billingStateField&&l.a.createElement("div",{className:"errorMessage"},t.billingStateField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"billingAddressZipField"},"Zip Code"),l.a.createElement(g.a,{id:"billingAddressZipField",name:"billingAddressZipField",placeholder:"zip code",type:"number",validate:Z}),t.billingAddressZipField&&a.billingAddressZipField&&l.a.createElement("div",{className:"errorMessage"},t.billingAddressZipField))))),l.a.createElement("div",{className:"inlineFifth"},l.a.createElement("div",{className:"leftFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Drop-off Address"),l.a.createElement("label",{htmlFor:"addressDropOffImput"},"Street Address"),l.a.createElement(g.a,{id:"addresslDropOffInput",name:"addressDropOffField",placeholder:"Street Address"}),t.addressDropOffField&&a.addressDropOffField&&l.a.createElement("div",{className:"errorMessage"},t.addressDropOffField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"cityDropOffImput"},"City"),l.a.createElement(g.a,{id:"cityDropOffInput",name:"cityDropOffField",placeholder:"city"}),t.cityDropOffField&&a.cityDropOffField&&l.a.createElement("div",{className:"errorMessage"},t.cityDropOffField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"stateDropOffImput"},"State"),l.a.createElement(g.a,{id:"stateDropOffInput",name:"stateDropOffField",placeholder:"state"}),t.stateDropOffField&&a.stateDropOffField&&l.a.createElement("div",{className:"errorMessage"},t.stateDropOffField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"dropOff"},"Zip Code"),l.a.createElement(g.a,{name:"zipCodeDropOff",placeholder:"zip code",type:"number",validate:Z}),t.zipCodeDropOff&&a.zipCodeDropOff&&l.a.createElement("div",{className:"errorMessage"},t.zipCodeDropOff)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"dropOff"},"Additional Information"),l.a.createElement(g.a,{name:"textareaDropOff",placeholder:"Additional notes, special instructions, gate code, etc",component:"textarea"}),t.textareaDropOff&&a.textareaDropOff&&l.a.createElement("div",{className:"errorMessage"},t.textareaDropOff))),l.a.createElement("div",{className:"rightFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Drop-off Contact"),l.a.createElement("div",{className:"ratioWrap checkboxInline"},l.a.createElement(g.a,{id:"sameAsMainDropOff",name:"sameAsMainContactDropOff",type:"checkbox",onClick:function(){k(!D)}}),l.a.createElement("label",{htmlFor:"sameAsMainDropOff"},"Same as Main Contact Info"))),D?"":l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"firstNameFieldDifferentDrop"},"First Name"),l.a.createElement(g.a,{id:"firstNameFieldDifferentDrop",name:"firstNameFieldDifferentDrop",placeholder:"Jane",validate:H}),t.firstNameFieldDifferentDrop&&a.firstNameFieldDifferentDrop&&l.a.createElement("div",{className:"errorMessage"},t.firstNameFieldDifferentDrop)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"lastNameFieldDifferentDrop"},"Last Name"),l.a.createElement(g.a,{id:"lastNameFieldDifferentDrop",name:"lastNameFieldDifferentDrop",placeholder:"Doe",validate:Y}),t.lastNameFieldDifferentDrop&&a.lastNameFieldDifferentDrop&&l.a.createElement("div",{className:"errorMessage"},t.lastNameFieldDifferentDrop)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"telFieldDifferentDrop"},"Phone"),l.a.createElement(g.a,{id:"telFieldDifferentDrop",name:"telFieldDifferentDrop",placeholder:"(555) 555 555",type:"tel",validate:X}),t.telFieldDifferentDrop&&a.telFieldDifferentDrop&&l.a.createElement("div",{className:"errorMessage"},t.telFieldDifferentDrop)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"emailFieldDifferentDrop"},"Email"),l.a.createElement(g.a,{id:"emailFieldDifferentDrop",name:"emailFieldDifferentDrop",placeholder:"hello@hello.com",type:"email",validate:G}),t.emailFieldDifferentDrop&&a.emailFieldDifferentDrop&&l.a.createElement("div",{className:"errorMessage"},t.emailFieldDifferentDrop))))),l.a.createElement("div",{className:"inlineFifth"},l.a.createElement("div",{className:"leftFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Pick-up Address"),l.a.createElement("label",{htmlFor:"addressPickUpImput"},"Street Address"),l.a.createElement(g.a,{id:"addresslPickUpInput",name:"addressPickUpField",placeholder:"Street Address"}),t.addressPickUpField&&a.addressPickUpField&&l.a.createElement("div",{className:"errorMessage"},t.addressPickUpField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"cityPickUpImput"},"City"),l.a.createElement(g.a,{id:"cityPickUpInput",name:"cityPickUpField",placeholder:"city"}),t.cityPickUpField&&a.cityPickUpField&&l.a.createElement("div",{className:"errorMessage"},t.cityPickUpField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"statePickUpImput"},"State"),l.a.createElement(g.a,{id:"statePickUpInput",name:"statePickUpField",placeholder:"state"}),t.statePickUpField&&a.statePickUpField&&l.a.createElement("div",{className:"errorMessage"},t.statePickUpField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"dropOff"},"Zip Code"),l.a.createElement(g.a,{name:"zipCodePickUp",placeholder:"zip code",type:"number",validate:Z}),t.zipCodePickUp&&a.zipCodePickUp&&l.a.createElement("div",{className:"errorMessage"},t.zipCodePickUp)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"dropOff"},"Additional Information"),l.a.createElement(g.a,{name:"textareaPickUp",placeholder:"Additional notes, special instructions, gate code, etc",component:"textarea"}))),l.a.createElement("div",{className:"rightFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Pick-up Contact"),l.a.createElement("div",{className:"ratioWrap checkboxInline"},l.a.createElement(g.a,{id:"sameAsMainPick",name:"sameAsMainContactPickUp",type:"checkbox",onClick:function(){O(!y)}}),l.a.createElement("label",{htmlFor:"sameAsMainPick"},"Same as Main Contact Info"))),y?"":l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"firstNameFieldDifferentPickUp"},"First Name"),l.a.createElement(g.a,{id:"firstNameFieldDifferentPickUp",name:"firstNameFieldDifferentPickUp",placeholder:"Jane",validate:H}),t.firstNameFieldDifferentPickUp&&a.firstNameFieldDifferentPickUp&&l.a.createElement("div",{className:"errorMessage"},t.firstNameFieldDifferentPickUp)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"lastNameFieldDifferentPickUp"},"Last Name"),l.a.createElement(g.a,{id:"lastNameFieldDifferentPickUp",name:"lastNameFieldDifferentPickUp",placeholder:"Doe",validate:Y}),t.lastNameFieldDifferentPickUp&&a.lastNameFieldDifferentPickUp&&l.a.createElement("div",{className:"errorMessage"},t.lastNameFieldDifferentPickUp)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"telFieldDifferentPickUp"},"Phone"),l.a.createElement(g.a,{id:"telFieldDifferentPickUp",name:"telFieldDifferentPickUp",placeholder:"(555) 555 555",type:"tel",validate:X}),t.telFieldDifferentPickUp&&a.telFieldDifferentPickUp&&l.a.createElement("div",{className:"errorMessage"},t.telFieldDifferentPickUp)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"emailFieldDifferentPickUp"},"Email"),l.a.createElement(g.a,{id:"emailFieldDifferentPickUp",name:"emailFieldDifferentPickUp",placeholder:"hello@hello.com",type:"email",validate:G}),t.emailFieldDifferentPickUp&&a.emailFieldDifferentPickUp&&l.a.createElement("div",{className:"errorMessage"},t.emailFieldDifferentPickUp))))),l.a.createElement("div",{className:"formControl submitControl fullLenght"},l.a.createElement("button",{className:"whiteBtn",type:"submit",onClick:function(){return i()}},l.a.createElement("span",null,"Previous")),l.a.createElement("button",{type:"submit",onClick:function(){return m("next")}},l.a.createElement("span",null,"Next"))))})))},ee=a(90),te=a.n(ee),ae=(a(125),"https://api.authorize.net/xml/v1/request.api?"),re="",ne="https://kingtote.vonigo.com/",le="",ie=k.b({cardHolderNameField:k.c().required("Name is required"),cardNumberField:k.c().required("Card number is required"),expirationDateField:k.c().required("Expiration date is required")}),ce=[/[0-9]/,/[0-9]/,"/",/[0-9]/,/[0-9]/],oe={clientID:0,contactID:0,locationID:0,lockID:0,optionID:245,workOrder:0,jobID:0},se={clientID:0,contactID:0,locationID:0,lockID:0,optionID:246,workOrder:0,jobID:0},de=function(e){var t=e.formData,a=e.setFormData,i=e.prevStep,c=e.nextStep,s=Object(n.useState)("back"),d=Object(o.a)(s,2),m=d[0],u=d[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),D=b[0],k=b[1],F=Object(n.useState)(""),y=Object(o.a)(F,2),O=y[0],C=y[1],I=Object(n.useState)(""),S=Object(o.a)(I,2),T=(S[0],S[1]),j=Object(n.useState)(""),x=Object(o.a)(j,2),P=(x[0],x[1]),A=Object(n.useState)(""),U=Object(o.a)(A,2),w=U[0],M=U[1],L=Object(n.useState)({amount:0,description:""}),q=Object(o.a)(L,2),z=q[0],B=q[1],W=Object(n.useState)(1),R=Object(o.a)(W,2),J=R[0],$=R[1],_=function(){var e=Object(n.useState)([0,0]),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useLayoutEffect)((function(){function e(){r([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),Z=Object(o.a)(_,1)[0],K=Object(n.useContext)(p).state,H=function(e){P(e)},Y=function(e){M(e)},X=function(e){C(e)},G=function(e){var t,a=e+"";return k(e),e?a.length>4?t="CVC code is 4 digits or less":a.length<3&&(t="CVC code is 3 digits at least"):t="CVC required",t},Q=function(e){T(e.target.name)},ee=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""===(a=document.getElementById("promoCodeField").value)||a.length<4)){e.next=5;break}return B({amount:0,description:""}),e.abrupt("return");case 5:return r={securityToken:K.securityToken,method:"1",promo:a},r=JSON.stringify(r),e.prev=7,e.next=10,N.a.post(ne+"api/v1/resources/promos/?",r,{headers:{"Content-Type":"application/json"}});case 10:null!==(n=e.sent).data&&B({amount:n.data.Promo[0].promoDiscount,description:n.data.Promo[0].promoDescription}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error getPromoDiscount  >> ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(E.a)(v.a.mark((function e(t,a,n){var l,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=0,i={getCustomerProfileRequest:{merchantAuthentication:{name:r,transactionKey:re},customerProfileId:t,includeIssuerInfo:"true"}},i=JSON.stringify(i),e.prev=3,e.next=6,N.a.post(ae,i,{headers:{"Content-Type":"application/json"}});case 6:c=e.sent,console.log(" $ getProfileUsingID : ",c.data),null!==c.data&&"Ok"===c.data.messages.resultCode&&De(a,n,t,void 0,l,Se(pe(ue())*(J/100+1))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Error getProfileUsingID >> ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a,r){return e.apply(this,arguments)}}(),me=function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n,l,i,c,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,c=0,o={createCustomerProfileRequest:{merchantAuthentication:{name:r,transactionKey:re},profile:{email:le.emailField,paymentProfiles:{customerType:"individual",payment:{creditCard:{cardNumber:w,expirationDate:O}}}}}},o=JSON.stringify(o),e.prev=4,e.next=7,N.a.post(ae,o,{headers:{"Content-Type":"application/json"}});case 7:s=e.sent,console.log(" $ getValuesToCompletePayment : ",s.data),null!==s.data&&("Error"===s.data.messages.resultCode&&(c=(c=s.data.messages.message[0].text).split(" ")[5],de(c,t,a)),"Ok"===s.data.messages.resultCode&&(n=s.data.customerProfileId,l=s.data.customerPaymentProfileIdList[0],i=s.data.validationDirectResponseList[0],De(t,a,n,l,i,Se(pe(ue())*(J/100+1))))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("Error getValuesToCompletePayment >> ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}(),pe=function(e){return e*(100-z.amount)/100},ue=function(){if(K.toteBoxesContent){for(var e=0,t=K.toteBoxesContent.filter((function(e){return null!==e.indexActive})),a=0,r=t.length;a<r;a++){var n=t[a];e+=n.prices[n.indexActive].price}return Se(e)}return 0},fe=function(){var e=Object(E.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={securityToken:K.securityToken,pageNo:"1",pageSize:"50"},t=JSON.stringify(t),e.prev=2,e.next=5,N.a.post(ne+"api/v1/resources/taxes/?",t,{headers:{"Content-Type":"application/json"}});case 5:null!==(a=e.sent).data.Taxes&&$(a.data.Taxes[0].taxPercent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error getTaxesPercent  >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e={firstName:K.firstNameField,lastName:K.lastNameField,company:"",address:K.addressDropOffField,city:K.cityDropOffField,state:K.stateDropOffField,zip:K.zipCodeDropOff,country:"16"===K.locationType?"USA":"Canada"};return K.sameAddressAsDropOff||(e.address=K.billingAddressField,e.city=K.billingCityField,e.state=K.billingStateField,e.zip=K.billingAddressZipField,e.country="16"===K.locationType?"USA":"Canada"),K.sameAsMainContactDropOff||(e.firstName=K.firstNameFieldDifferentDrop,e.lastName=K.lastNameFieldDifferentDrop),e},Ee=function(){var e={firstName:K.firstNameField,lastName:K.lastNameField,company:"",address:"",city:"",state:"",zip:"",country:""};return e.address=K.addressPickUpField,e.city=K.cityPickUpField,e.state=K.statePickUpField,e.zip=K.zipCodePickUp,e.country="16"===K.locationType?"USA":"Canada",K.sameAsMainContactPickUp||(e.firstName=K.firstNameFieldDifferentPickUp,e.lastName=K.lastNameFieldDifferentPickUp),e},be=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("price >>>"+ue()),console.log("total price >>>"+Se(pe(ue())*(J/100+1))),a="20"+O.substring(3,5)+"-"+O.substring(0,2),console.log("expiryFormatted >>"+a),n={createTransactionRequest:{merchantAuthentication:{name:r,transactionKey:re},refId:t,transactionRequest:{transactionType:"authCaptureTransaction",amount:Se(pe(ue())*(J/100+1)),payment:{creditCard:{cardNumber:w,expirationDate:a,cardCode:D}},tax:{amount:Se(pe(ue())*(J/100+1)),name:"voing tax",description:"".concat(J," %")},billTo:ve(),shipTo:Ee()}}},n=JSON.stringify(n),e.prev=6,e.next=9,N.a.post(ae,n,{headers:{"Content-Type":"application/json"}});case 9:null!==(l=e.sent).data&&me(t,l.data.transactionResponse.transId),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log("Error createAuthorize >> ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(E.a)(v.a.mark((function e(t,a,r,n,l,o){var s,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={securityToken:K.securityToken,method:"3",clientID:oe.clientID,jobID:t,authNetClient:r,authNetCard:n,authNetCardLast4Digits:w.substring(11,15),authNetTransaction:a,authNetTransactionLog:l,Fields:[{fieldID:930,fieldValue:o},{fieldID:931,fieldValue:o},{fieldID:936,optionID:10124},{fieldID:928,fieldValue:"Online booking. No summary data"}]},s=JSON.stringify(s),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/data/Payments/?",s,{headers:{"Content-Type":"application/json"}});case 5:d=e.sent,console.log(" $ $ $ createPayment : ",d.data),null!==d.data&&("back"===m?i():c(),document.body.classList.remove("busy-cursor")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error createPayment >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,r,n,l,i){return e.apply(this,arguments)}}(),he=function(){var e=Object(E.a)(v.a.mark((function e(a,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={securityToken:K.securityToken,method:"3",jobID:a,lockID:"dropOff"===r?oe.lockID:se.lockID,clientID:"dropOff"===r?oe.clientID:se.clientID,contactID:"dropOff"===r?oe.contactID:se.contactID,locationID:"dropOff"===r?oe.locationID:se.locationID,serviceTypeID:t.locationType,Fields:[{fieldID:200,fieldValue:"Online booking. No summary data"},{fieldID:186,fieldValue:60},{fieldID:201,optionID:"dropOff"===r?245:246}]},n=JSON.stringify(n),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/data/WorkOrders/?",n,{headers:{"Content-Type":"application/json"}});case 5:null!==(l=e.sent).data&&("dropOff"===r?oe.workOrder=l.data.WorkOrder.objectID:se.workOrder=l.data.WorkOrder.objectID),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(r," Error createWorkOrders >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),ge=function(){var e=Object(E.a)(v.a.mark((function e(){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={securityToken:K.securityToken,method:"3",clientID:oe.clientID,Fields:[{fieldID:978,fieldValue:"Online booking. No summary data"},{fieldID:982,optionID:"16"===t.locationType?10278:10173}]},a=JSON.stringify(a),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/data/Jobs/?",a,{headers:{"Content-Type":"application/json"}});case 5:null!==(r=e.sent).data&&(he(r.data.Job.objectID,"dropOff"),he(r.data.Job.objectID,"pickUp"),be(r.data.Job.objectID)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error createNewJob >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(E.a)(v.a.mark((function e(a,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={securityToken:K.securityToken,method:"2",dayID:"dropOff"===r?K.dropOffObj.dayID:K.pickUpObj.dayID,routeID:"dropOff"===r?K.dropOffObj.routeID:K.pickUpObj.routeID,locationID:a,serviceTypeID:t.locationType,duration:60,startTime:"dropOff"===r?K.dropOffObj.startTime:K.pickUpObj.startTime},n=JSON.stringify(n),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/resources/availability/?",n,{headers:{"Content-Type":"application/json"}});case 5:null!==(l=e.sent).data&&("dropOff"===r&&(oe.lockID=l.data.Ids.lockID,ge()),"pickUp"===r&&(se.lockID=l.data.Ids.lockID)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(r+" Error lockAvailabilityFields>> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(E.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={securityToken:K.securityToken,method:"9",objectID:t},a=JSON.stringify(a),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/data/Locations/?",a,{headers:{"Content-Type":"application/json"}});case 5:null!==(r=e.sent).data&&console.log("setBillingAddress : ",r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error setBillingAddress >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(E.a)(v.a.mark((function e(t,a,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={securityToken:K.securityToken,method:"3",clientID:a,Fields:[{fieldID:773,fieldValue:"dropOff"===r?t.addressDropOffField:t.addressPickUpField},{fieldID:776,fieldValue:"dropOff"===r?t.cityDropOffField:t.cityPickUpField},{fieldID:778,optionID:"9847"},{fieldID:775,fieldValue:"dropOff"===r?t.zipCodeDropOff:t.zipCodePickUp},{fieldID:779,optionID:"9906"},{fieldID:9713,fieldValue:"dropOff"===r?t.textareaDropOff:t.textareaPickUp}]},"billing"===r&&(n={securityToken:K.securityToken,method:"3",clientID:a,Fields:[{fieldID:773,fieldValue:t.billingAddressField},{fieldID:776,fieldValue:t.billingCityField},{fieldID:778,optionID:"9847"},{fieldID:775,fieldValue:t.billingAddressZipField},{fieldID:779,optionID:"9906"},{fieldID:9713,fieldValue:"-"}]}),n=JSON.stringify(n),e.prev=3,e.next=6,N.a.post("https://kingtote.vonigo.com/api/v1/data/Locations/?",n,{headers:{"Content-Type":"application/json"}});case 6:if(null===(l=e.sent).data){e.next=22;break}if(console.log("\n"),console.log(r+" Locations : ",l.data),"billing"!==r){e.next=13;break}return Fe(l.data.Location.objectID),e.abrupt("return");case 13:if("pickUp"!==r){e.next=20;break}return t.sameAddressAsDropOff||Ne(t,a,"billing"),ke(l.data.Location.objectID,r),se.locationID=l.data.Location.objectID,e.abrupt("return");case 20:"dropOff"===r&&(ke(l.data.Location.objectID,r),oe.locationID=l.data.Location.objectID,t.sameAddressAsDropOff&&Fe(l.data.Location.objectID));case 21:Ne(t,a,"pickUp");case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),console.log(r+" Error Locations>> ",e.t0);case 27:case"end":return e.stop()}}),e,null,[[3,24]])})));return function(t,a,r){return e.apply(this,arguments)}}(),ye=function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={securityToken:K.securityToken,method:"9",objectID:t},a=JSON.stringify(a),e.prev=2,e.next=5,N.a.post("https://kingtote.vonigo.com/api/v1/data/Contacts/?",a,{headers:{"Content-Type":"application/json"}});case 5:e.sent.data.Contact,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error WorkOrders >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e,t,a){var r,n,l,i;switch(a){case"main":r=e.firstNameField,n=e.lastNameField,l=e.telField,i=e.emailField;break;case"dropOff":r=e.firstNameFieldDifferentDrop,n=e.lastNameFieldDifferentDrop,l=e.telFieldDifferentDrop,i=e.emailFieldDifferentDrop;break;case"pickUp":r=e.firstNameFieldDifferentPickUp,n=e.lastNameFieldDifferentPickUp,l=e.telFieldDifferentPickUp,i=e.emailFieldDifferentPickUp}return{securityToken:K.securityToken,method:"3",clientID:t,Fields:[{fieldID:127,fieldValue:r},{fieldID:128,fieldValue:n},{fieldID:1088,fieldValue:l},{fieldID:97,fieldValue:i}]}},Ce=function(){var e=Object(E.a)(v.a.mark((function e(t,a,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=Oe(t,a,r),n=JSON.stringify(n),e.prev=3,e.next=6,N.a.post("https://kingtote.vonigo.com/api/v1/data/Contacts/?",n,{headers:{"Content-Type":"application/json"}});case 6:null!==(l=e.sent).data.Contact&&("main"===r&&(ye(l.data.Contact.objectID),t.sameAsMainContactDropOff&&(oe.contactID=l.data.Contact.objectID),t.sameAsMainContactPickUp&&(se.contactID=l.data.Contact.objectID)),"dropOff"===r&&(oe.contactID=l.data.Contact.objectID),"pickUp"===r&&(se.contactID=l.data.Contact.objectID)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(r," Error Contacts>> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a,r){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(E.a)(v.a.mark((function e(a){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={securityToken:K.securityToken,method:"3",Fields:[{fieldID:121,optionID:"16"===t.locationType?59:60},{fieldID:126,fieldValue:a.lastNameField+" "+a.firstNameField},{fieldID:112,fieldValue:a.telField},{fieldID:1091,fieldValue:a.emailField}]},le=a,e.t0=a.serviceArea,e.next="17"===e.t0?5:"20"===e.t0?8:"21"===e.t0?11:14;break;case 5:return r="6b4Mb5Kh",re="4x986p8P6N23ZfCe",e.abrupt("break",15);case 8:return r="44Q44dVve",re="2rG889a6g4rJG3Pw",e.abrupt("break",15);case 11:return r="7p3Vh34wHD",re="64HsC4w7H49x2nWx",e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:return n=JSON.stringify(n),e.prev=16,e.next=19,N.a.post(ne+"api/v1/data/Clients/?",n,{headers:{"Content-Type":"application/json"}});case 19:if(null===(l=e.sent).data.Client){e.next=32;break}return e.next=23,Ce(a,l.data.Client.objectID,"main");case 23:if(a.sameAsMainContactDropOff||0!==oe.contactID){e.next=26;break}return e.next=26,Ce(a,l.data.Client.objectID,"dropOff");case 26:if(a.sameAsMainContactPickUp||0!==se.contactID){e.next=29;break}return e.next=29,Ce(a,l.data.Client.objectID,"pickUp");case 29:Ne(a,l.data.Client.objectID,"dropOff"),oe.clientID=l.data.Client.objectID,se.clientID=l.data.Client.objectID;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(16),console.log("Error Clients  >> ",e.t1);case 37:case"end":return e.stop()}}),e,null,[[16,34]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){window.scrollTo({behavior:"smooth",top:0}),fe()}),[]);var Se=function(e){return e.toFixed(2)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{title:"Confirm User Data",step:"Five"}),l.a.createElement("div",{className:"introWrap"},l.a.createElement("h2",null,"Order Confirmation"),l.a.createElement("p",null,"Please provide Payment Information and review your order details")),l.a.createElement(g.c,{initialValues:t,onSubmit:function(e){a(e),Ie(e),document.body.classList.add("busy-cursor")},validationSchema:ie},(function(e){var r=e.errors,n=e.touched;return l.a.createElement(g.b,{className:"fifthForm"},l.a.createElement("div",{className:"inlineFifth"},l.a.createElement("div",{className:"leftFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Payment Information"),l.a.createElement("label",{htmlFor:"cardHolderNameInput"},"Cardholder Name"),l.a.createElement(g.a,{id:"cardHolderNameInput",name:"cardHolderNameField",placeholder:"Jane Doe",validate:H,onFocus:Q}),r.cardHolderNameField&&n.cardHolderNameField&&l.a.createElement("div",{className:"errorMessage"},r.cardHolderNameField)),l.a.createElement("div",{className:"formControl"},l.a.createElement("label",{htmlFor:"cardNumberInput"},"Card Number"),l.a.createElement(g.a,{id:"cardNumberInput",name:"cardNumberField",placeholder:"",validate:Y,onFocus:Q}),r.cardNumberField&&n.cardNumberField&&l.a.createElement("div",{className:"errorMessage"},r.cardNumberField)),l.a.createElement("div",{className:"formControl inlineFields"},l.a.createElement("div",{className:"wrapBillingInline"},l.a.createElement("label",{htmlFor:"expirationDateInput"},"Expiration Date"),l.a.createElement(g.a,{name:"expirationDateField",validate:X,onFocus:Q,render:function(e){var t=e.field;return l.a.createElement(te.a,Object.assign({},t,{mask:ce,id:"expirationDateInput",placeholder:"MM/YY",type:"text"}))}}),r.expirationDateField&&n.expirationDateField&&l.a.createElement("div",{className:"errorMessage"},r.expirationDateField)),l.a.createElement("div",{className:"wrapBillingInline"},l.a.createElement("label",{htmlFor:"cvcInput"},"Security Code"),l.a.createElement(g.a,{id:"cvcInput",name:"cvcField",placeholder:"",type:"number",validate:G,onFocus:Q}),r.cvcField&&n.cvcField&&l.a.createElement("div",{className:"errorMessage"},r.cvcField)))),l.a.createElement("div",{className:"rightFields"},l.a.createElement("div",{className:"formControl"},l.a.createElement("h3",null,"Order Details "),K.toteBoxesContent?K.toteBoxesContent.filter((function(e){return null!==e.indexActive})).map((function(e,t){return l.a.createElement("div",{key:t,className:"rowDetailWrap"},l.a.createElement("p",null,e.indexActive+1," ",e.indexActive>0?"weeks":"week"," - ",e.title),l.a.createElement("span",null,"$",Se(e.prices[e.indexActive].price)))})):"",l.a.createElement("div",{className:"rowDetailWrap topLine"},l.a.createElement("p",null,"Sub Total "),l.a.createElement("span",null,"$",Se(1*ue()))),z.amount>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rowDetailWrap"},l.a.createElement("p",null,"Discount (",z.description,")"),l.a.createElement("span",null,"- $",Se(ue()*z.amount/100)))):"",J>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"rowDetailWrap "},l.a.createElement("p",null,"Taxes (",J,"%)"),l.a.createElement("span",null,"$",Se(pe(ue())*(J/100)))),l.a.createElement("div",{className:"rowDetailWrap topLine bold"},l.a.createElement("p",null,"Total"),l.a.createElement("span",null,"$",Se(pe(ue())*(J/100+1))))):""),l.a.createElement("div",{className:"formControl inlineFields"},l.a.createElement("div",{className:"wrapBillingInline"},l.a.createElement("label",{htmlFor:"promoCodeField"},"Promo Code"),l.a.createElement(g.a,{id:"promoCodeField",name:"promoCodeField",placeholder:"Enter Code",type:"string"})),l.a.createElement("div",{className:"wrapBillingInline"},l.a.createElement("label",{className:"transparent"},"Apply"),l.a.createElement("button",{className:"whiteBtn",onClick:ee},l.a.createElement("span",null,"Apply")))))),l.a.createElement("div",{className:"inlineFifth"},l.a.createElement("div",{className:"rightFields"})),l.a.createElement("div",{className:"inlineFifth calendars"},l.a.createElement(V,{formData:t,setFormData:a,origin:"Confirm"})),l.a.createElement("div",{className:"formControl submitControl fullLenght"},l.a.createElement("button",{className:"whiteBtn",type:"submit",onClick:function(){return i()}},l.a.createElement("span",null,"Previous")),l.a.createElement("button",{type:"submit",className:"submitOrder",onClick:function(){return u("next")}},l.a.createElement("span",null,Z>768?"Submit Order":"Submit"," "))))})))},me=a(138),pe=Object(me.a)((function(e){return{textCenter:{textAlign:"center"}}})),ue=function(){var e=pe();return l.a.createElement("div",{className:e.textCenter},l.a.createElement(h,{title:"Success",step:"Five"}),l.a.createElement("h1",null,"Thank You For Your Submission"))},fe=function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)({serviceArea:"",dropOff:"",pickUp:"",locationType:"16",firstNameField:"",lastNameField:"",telField:"",emailField:"",sameAddressAsDropOff:!1,billingAddressField:"",billingCityField:"",billingStateField:"",billingAddressZipField:"",addressDropOffField:"",sameAsMainContactDropOff:!0,cityDropOffField:"",stateDropOffField:"",zipCodeDropOff:"",textareaDropOff:"",addressPickUpField:"",sameAsMainContactPickUp:!0,cityPickUpField:"",statePickUpField:"",zipCodePickUp:"",textareaPickUp:"",firstNameFieldDifferentDrop:"",lastNameFieldDifferentDrop:"",telFieldDifferentDrop:"",emailFieldDifferentDrop:"",firstNameFieldDifferentPickUp:"",lastNameFieldDifferentPickUp:"",telFieldDifferentPickUp:"",emailFieldDifferentPickUp:"",cardHolderNameField:"",cardNumberField:"",expirationDateField:"",cvcField:"",dateDropOff:null,datePickUp:null,timeRangeDropStart:null,timeRangeDropEnd:null,timeRangePickStart:null,timeRangePickEnd:null,schedulingSummary:null,securityToken:null,promoCodeField:""}),c=Object(o.a)(i,2),s=c[0],d=c[1],m=Object(n.useContext)(p).dispatch,u=function(){return r((function(e){return e+1}))},f=function(){return r((function(e){return e-1}))},b=Object(n.useState)(null),D=Object(o.a)(b,2),h=D[0],g=D[1],k=Object(n.useState)(null),F=Object(o.a)(k,2),y=F[0],C=F[1],I=Object(n.useState)(null),S=Object(o.a)(I,2),T=S[0],x=S[1],P=Object(n.useState)(null),A=Object(o.a)(P,2),U=A[0],w=A[1],M=Object(n.useState)(!1),L=Object(o.a)(M,2),q=L[0],z=L[1],B=Object(n.useState)(null),W=Object(o.a)(B,2),V=W[0],J=W[1],$=Object(n.useState)(!1),_=Object(o.a)($,2),Z=_[0],K=_[1];switch(Object(n.useEffect)((function(){(function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://kingtote.vonigo.com/api/v1/security/login/?appVersion=1company=Vonigo&password=de1485461568b6ce64c6687e98a9e194&userName=API.User");case 3:t=e.sent,g(t.data.securityToken),z(!0),m({type:"SET_TOKEN",payload:t.data.securityToken}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),J(e.t0.message),z(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e="https://kingtote.vonigo.com/api/v1/resources/franchises/?securityToken="+h+"&pageNo=1&pageSize=50&method=0";h?N.a.get(e).then((function(e){null!==e.data&&C(e.data.Franchises),z(!0)})).catch((function(e){J(e.message),z(!0)})):q||null===V||console.log("reload...")}),[h]),Object(n.useEffect)((function(){var e="https://kingtote.vonigo.com/api/v1/resources/zips/?securityToken="+h+"&pageNo=1&pageSize=50";h&&N.a.get(e).then((function(e){null!==e.data&&x(e.data.Zips),z(!0)})).catch((function(e){J(e.message),z(!0)}))}),[h]),a){case 1:return l.a.createElement(O,{formData:s,setFormData:d,nextStep:u,franchises:y,zipCodes:T,serviceTypes:U,setServiceTypes:w,setResetCalendars:K});case 2:return l.a.createElement(j,{formData:s,setFormData:d,nextStep:u,prevStep:f,serviceTypes:U,setServiceTypes:w,resetCalendars:Z,setResetCalendars:K});case 3:return l.a.createElement(R,{formData:s,setFormData:d,nextStep:u,prevStep:f});case 4:return l.a.createElement(Q,{formData:s,setFormData:d,nextStep:u,prevStep:f});case 5:return l.a.createElement(de,{formData:s,setFormData:d,nextStep:u,prevStep:f});default:return l.a.createElement(ue,null)}},ve=(a(127),a(128),function(){return l.a.createElement(fe,null)});c.a.render(l.a.createElement(u,null,l.a.createElement(ve,null)),document.getElementById("root"))},86:function(e,t,a){e.exports=a.p+"static/media/kt_logo_150.eea69254.png"},91:function(e,t,a){e.exports=a(129)},95:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.69006de1.chunk.js.map